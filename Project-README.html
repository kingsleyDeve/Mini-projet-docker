# Generate an updated HTML README reflecting .env configuration for the PayMyBuddy project

html_env = """<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>README ‚Äì PayMyBuddy (.env + Docker Compose)</title>
  <style>
    :root {
      --bg:#0b1020;
      --card:#111827;
      --muted:#9ca3af;
      --text:#e5e7eb;
      --accent:#60a5fa;
      --border:#1f2937;
      --code:#0f172a;
    }
    * { box-sizing: border-box; }
    body {
      font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";
      line-height: 1.6; margin: 0; color: var(--text);
      background: radial-gradient(1200px 800px at 80% -10%, #1e293b22, transparent 60%), var(--bg);
    }
    .container { max-width: 980px; margin: 0 auto; padding: 40px 22px 80px; }
    header {
      background: linear-gradient(130deg, #2563eb, #06b6d4 50%, #16a34a);
      border-bottom: 1px solid #1e293b; padding: 28px 24px; border-radius: 18px; color: white;
      margin-bottom: 28px; box-shadow: 0 15px 35px rgba(2,6,23,.35);
    }
    header h1 { margin: 0 0 6px 0; font-size: 28px; letter-spacing: .3px; }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
      border: 1px solid var(--border); border-radius: 16px; padding: 22px; margin: 18px 0;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.03), 0 6px 16px rgba(2,6,23,.35);
    }
    h2 { font-size: 22px; margin: 22px 0 10px; }
    h3 { font-size: 18px; margin: 18px 0 8px; }
    a { color: var(--accent); text-decoration: none; } a:hover { text-decoration: underline; }
    code, pre {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      background: var(--code); color: #e5e7eb; border: 1px solid #0b1220; border-radius: 10px;
    }
    code { padding: 2px 6px; }
    pre { padding: 14px; overflow: auto; }
    .muted { color: var(--muted); }
    .two-col { display: grid; gap: 16px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); align-items: start; }
    .badge { display: inline-block; padding: 2px 8px; border-radius: 999px; border: 1px solid #2b395a; background:#0f162c; color: #b6c2d9; font-size: 12px; margin-right: 6px; }
    footer { margin-top: 36px; color: var(--muted); font-size: 14px; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>PayMyBuddy ‚Äì Spring Boot + MySQL + Docker (.env)</h1>
      <p>Application de gestion de transactions entre amis. Orchestr√©e avec Docker¬†Compose, configur√©e via fichier <strong>.env</strong>.</p>
    </header>

    <div class="card">
      <h2>Sommaire</h2>
      <ul>
        <li><a href="#description">Description</a></li>
        <li><a href="#prerequis">Pr√©requis</a></li>
        <li><a href="#structure">Structure du projet</a></li>
        <li><a href="#env">Fichier .env</a></li>
        <li><a href="#compose">docker-compose.yml</a></li>
        <li><a href="#initdb">Initialisation MySQL</a></li>
        <li><a href="#run">Lancer &amp; commandes</a></li>
        <li><a href="#troubleshoot">D√©pannage</a></li>
        <li><a href="#security">Bonnes pratiques</a></li>
      </ul>
    </div>

    <section id="description" class="card">
      <h2>üöÄ Description</h2>
      <p><strong>PayMyBuddy</strong> est une application <em>Spring Boot</em> (Java¬†17) qui s‚Äôappuie sur une base <strong>MySQL</strong>. La stack est packag√©e en conteneurs et lanc√©e via <strong>Docker¬†Compose</strong>.</p>
      <div>
        <span class="badge">Java¬†17</span>
        <span class="badge">Spring Boot¬†2.7.x</span>
        <span class="badge">MySQL¬†8</span>
        <span class="badge">Docker¬†/ Compose</span>
        <span class="badge">.env config</span>
      </div>
    </section>

    <section id="prerequis" class="card">
      <h2>üõ†Ô∏è Pr√©requis</h2>
      <ul>
        <li>Docker &amp; Docker¬†Compose install√©s (<a href="https://docs.docker.com/get-docker/" target="_blank" rel="noreferrer">docs</a>)</li>
        <li>Java¬†17+ si vous souhaitez packager le JAR (<code>mvn package</code>)</li>
      </ul>
    </section>

    <section id="structure" class="card">
      <h2>üìÇ Structure du projet</h2>
      <pre><code>.
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ initdb/
‚îÇ   ‚îî‚îÄ‚îÄ create.sql
‚îî‚îÄ‚îÄ target/
    ‚îî‚îÄ‚îÄ paymybuddy.jar
</code></pre>
    </section>

    <section id="env" class="card">
      <h2>üîë Fichier <code>.env</code></h2>
      <p>Les valeurs sensibles (utilisateurs, mots de passe, URL JDBC) sont centralis√©es dans le fichier <code>.env</code>.</p>
      <pre><code># MySQL
MYSQL_DATABASE=db_paymybuddy
MYSQL_USER=example-user
MYSQL_PASSWORD=example-pass
MYSQL_ROOT_PASSWORD=example-root-pass

# Spring Boot
SPRING_DATASOURCE_URL=URL_JDBC
SPRING_DATASOURCE_USERNAME=example-user
SPRING_DATASOURCE_PASSWORD=example-pass</code></pre>
      <p class="muted">Ajoutez <code>.env</code> √† votre <code>.gitignore</code> pour √©viter de versionner les secrets.</p>
    </section>

    <section id="compose" class="card">
      <h2>üß© <code>docker-compose.yml</code></h2>
      <div class="two-col">
        <div>
          <h3>Service MySQL</h3>
          <pre><code>paymybuddy-db:
  image: mysql:latest
  container_name: paymybuddy-db
  environment:
    - MYSQL_DATABASE=${MYSQL_DATABASE}
    - MYSQL_USER=${MYSQL_USER}
    - MYSQL_PASSWORD=${MYSQL_PASSWORD}
    - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
  volumes:
    - paymybuddy-data:/var/lib/mysql
    - ./initdb/create.sql:/docker-entrypoint-initdb.d/create.sql:ro
  networks:
    - paymybuddy-network
  ports:
    - "3306:3306"</code></pre>
        </div>
        <div>
          <h3>Service Backend</h3>
          <pre><code>paymybuddy-backend:
  image: paymybuddy-app:latest
  container_name: paymybuddy-backend
  depends_on:
    - paymybuddy-db
  environment:
    - SPRING_DATASOURCE_URL=${SPRING_DATASOURCE_URL}
    - SPRING_DATASOURCE_USERNAME=${SPRING_DATASOURCE_USERNAME}
    - SPRING_DATASOURCE_PASSWORD=${SPRING_DATASOURCE_PASSWORD}
  networks:
    - paymybuddy-network
  ports:
    - "8080:8080"</code></pre>
        </div>
      </div>
      <pre><code>volumes:
  paymybuddy-data:

networks:
  paymybuddy-network:</code></pre>
    </section>

    <section id="initdb" class="card">
      <h2>üóÑÔ∏è Initialisation MySQL</h2>
      <p>Placez vos scripts dans¬†: <code>/docker-entrypoint-initdb.d/</code>. Exemple de montage¬†:</p>
      <pre><code>- ./initdb/create.sql:/docker-entrypoint-initdb.d/create.sql:ro</code></pre>
      <ul>
        <li>Les fichiers <code>.sql</code>, <code>.sql.gz</code> et <code>.sh</code> sont ex√©cut√©s <strong>une seule fois</strong> (volume neuf).</li>
        <li>Les <code>.sql</code> n‚Äôont pas besoin du bit ex√©cutable ; les <code>.sh</code> oui.</li>
      </ul>
      <h3>Exemple minimal</h3>
      <pre><code>CREATE TABLE IF NOT EXISTS demo (
  id INT AUTO_INCREMENT PRIMARY KEY,
  message VARCHAR(255) NOT NULL
);
INSERT INTO demo (message) VALUES ('Hello PayMyBuddy with .env!');</code></pre>
    </section>

    <section id="run" class="card">
      <h2>‚ñ∂Ô∏è Lancer &amp; commandes utiles</h2>
      <pre><code>
# Construire l‚Äôimage
        
docker build . -t paymybuddy-app

# D√©marrer (charge automatiquement .env)

docker compose up -d


# R√©initialiser la base (supprime les donn√©es)

docker compose down -v 

</code></pre>
    </section>

    <section id="troubleshoot" class="card">
      <h2>ü©∫ D√©pannage</h2>
      <h3>Erreur¬†: <code>Access denied for user</code></h3>
      <ul>
        <li>V√©rifiez la coh√©rence entre <code>SPRING_DATASOURCE_USERNAME/PASSWORD</code> et <code>MYSQL_USER/PASSWORD</code>.</li>
        <li>Si vous venez de changer les variables MySQL, supprimez le volume¬†: <code>docker compose down -v</code>, puis relancez.</li>
      </ul>
      <h3>Le script SQL ne s‚Äôex√©cute pas</h3>
      <ul>
        <li>Le volume doit √™tre neuf au premier d√©marrage.</li>
        <li>Chemin exact¬†: <code>./initdb/create.sql -&gt; /docker-entrypoint-initdb.d/create.sql</code>.</li>
      </ul>
    </section>

    <section id="security" class="card">
      <h2>üîê Bonnes pratiques</h2>
      <ul>
        <li>Ne versionnez pas votre <code>.env</code>.</li>
        <li>Utilisez des fichiers <code>.env</code></li>
        <li>En production, pr√©f√©rez un gestionnaire de secrets (Docker Secrets, Vault, AWS Secrets Manager‚Ä¶).</li>
        <li>N‚Äôexposez pas MySQL publiquement ; limitez l‚Äôacc√®s au r√©seau interne.</li>
      </ul>
    </section>

    <footer>
      <p>¬© PayMyBuddy ‚Äî Guide de d√©ploiement conteneuris√© avec configuration .env.</p>
    </footer>
  </div>
</body>
</html>

